{% comment %}
Shopify Section: Customizable Product Feature Section

This section uses a responsive two-column layout (image and features)
and includes a schema for easy editing within the Shopify Theme Editor.

Fixes applied:
1. Updated range settings (min, step, and default) to avoid decimal precision errors.
2. Implemented all custom color, typography, image ratio, and spacing settings.
{% endcomment %}

{% comment %} Get all settings variables for use in CSS {% endcomment %}
{% assign primary_color = section.settings.primary_color %}
{% assign secondary_color = section.settings.secondary_color %}
{% assign headline_color = section.settings.headline_color %}
{% assign text_color = section.settings.text_color %}
{% assign bg_color = section.settings.bg_color %}

{% assign callout_text_size = section.settings.callout_text_size | append: 'rem' %}
{% assign headline_size_mobile = section.settings.headline_size_mobile | append: 'rem' %}
{% assign headline_size_desktop = section.settings.headline_size_desktop | append: 'rem' %}
{% assign feature_title_size_mobile = section.settings.feature_title_size_mobile | append: 'rem' %}
{% assign feature_title_size_desktop = section.settings.feature_title_size_desktop | append: 'rem' %}
{% assign feature_description_size = section.settings.feature_description_size | append: 'rem' %}

{% assign product_image_ratio = 100 | divided_by: section.settings.product_image_ratio_w | times: section.settings.product_image_ratio_h | append: '%' %}

<style>
/* --------------------------------------
1. Global Styles and Layout
-------------------------------------- */

/* Responsive breakpoints */
{% assign screen_lg = '1024px' %}

/* Main Section Wrapper */
.product-features-wrapper {
    max-width: 1280px; /* Equivalent to max-w-7xl */
    margin-left: auto;
    margin-right: auto;
    background-color: {{ bg_color }}; /* CUSTOMIZABLE */
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* Equivalent to shadow-2xl */
    border-radius: 0.75rem; /* Equivalent to rounded-xl */
    padding: 1.5rem; /* Equivalent to p-6 */
    border: 1px solid #f3f4f6; /* Equivalent to border-gray-100 */
    margin-top: {{ section.settings.section_spacing_y }}px; /* CUSTOMIZABLE */
    margin-bottom: {{ section.settings.section_spacing_y }}px; /* CUSTOMIZABLE */
}

/* Responsive Grid Container */
.features-grid-container {
    display: grid;
    grid-template-columns: 1fr; /* 1 column on mobile */
    gap: 3rem; /* Equivalent to gap-12 */
    align-items: center;
}

@media (min-width: {{ screen_lg }}) {
    .product-features-wrapper {
        padding: 3rem; /* Equivalent to lg:p-12 */
    }
    .features-grid-container {
        grid-template-columns: repeat(2, 1fr); /* 2 columns on desktop */
        gap: 5rem; /* Equivalent to lg:gap-20 */
    }
}

/* Column Ordering - Logic is unchanged */
.product-image-col {
    order: 2;
    display: flex;
    justify-content: center;
}
.feature-content-col {
    order: 1;
}
@media (min-width: {{ screen_lg }}) {
    .product-image-col {
        order: 1; /* lg:order-1 */
    }
    .feature-content-col {
        order: 2; /* lg:order-2 */
    }
}

/* --------------------------------------
    2. Product Image Styles (Aspect Ratio Control)
    -------------------------------------- */
.product-image-col .image-wrapper {
    width: 100%;
    max-width: 32rem; /* Equivalent to max-w-sm */
}
.product-image-container-{{ section.id }} {
    position: relative;
    /* CUSTOMIZABLE: padding-top determines the aspect ratio */
    padding-top: {{ product_image_ratio }};
}
.product-image-container-{{ section.id }} img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
    transition: all 0.3s ease; /* transition duration-300 */
}
.product-image-container-{{ section.id }} img:hover {
    /* CUSTOMIZABLE: uses primary color for hover shadow */
    box-shadow: 0 25px 50px -12px {{ primary_color | color_modify: 'alpha', 0.5 }}; 
}


/* --------------------------------------
    3. Text and Headline Styles (Typography and Color Control)
    -------------------------------------- */
.callout-text {
    font-size: {{ callout_text_size }}; /* CUSTOMIZABLE */
    font-weight: 600; /* font-semibold */
    text-transform: uppercase;
    letter-spacing: 0.1em; /* tracking-widest */
    color: {{ primary_color }}; /* CUSTOMIZABLE */
    margin-bottom: 0.5rem; /* mb-2 */
}

.headline {
    font-size: {{ headline_size_mobile }}; /* CUSTOMIZABLE */
    font-weight: 800; /* font-extrabold */
    color: {{ headline_color }}; /* CUSTOMIZABLE */
    margin-bottom: 2rem; /* mb-8 */
}
@media (min-width: 640px) {
    .headline {
        font-size: {{ headline_size_desktop }}; /* CUSTOMIZABLE */
    }
}

/* --------------------------------------
    4. Features Grid and Items
    -------------------------------------- */
.features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem; /* gap-8 */
}

.feature-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem; /* space-y-3 */
}

/* Icon Container - Responsive Sizing */
.feature-icon-container {
    position: relative;
    width: 4rem; /* w-16 */
    height: 4rem; /* h-16 */
    background-color: #f3f4f6; 
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06); /* shadow-inner */
    overflow: hidden;
}
@media (min-width: 640px) {
    .feature-icon-container {
        width: 5rem; /* sm:w-20 */
        height: 5rem; /* sm:h-20 */
    }
}

/* Hexagonal Clipping */
.hex-clip-{{ section.id }} {
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    -webkit-clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

/* Icon Image/Placeholder */
.feature-icon-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1.05); /* scale-105 */
}

.feature-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: {{ secondary_color }}; /* CUSTOMIZABLE */
    color: #ffffff; /* text-white */
    font-weight: 700; /* font-bold */
    font-size: 1.125rem; /* text-lg */
}

/* Feature Title and Description */
.feature-title {
    font-size: {{ feature_title_size_mobile }}; /* CUSTOMIZABLE */
    font-weight: 700; /* font-bold */
    color: {{ headline_color }}; /* CUSTOMIZABLE */
    line-height: 1.25; /* leading-tight */
    margin-top: 0.5rem; /* mt-2 */
}
@media (min-width: 640px) {
    .feature-title {
        font-size: {{ feature_title_size_desktop }}; /* CUSTOMIZABLE */
    }
}

.feature-description {
    font-size: {{ feature_description_size }}; /* CUSTOMIZABLE */
    color: {{ text_color }}; /* CUSTOMIZABLE */
}


</style>

<div class="product-features-wrapper">

<div class="features-grid-container">

    <div class="product-image-col">
        <div class="image-wrapper">
            <div class="product-image-container-{{ section.id }}">
                {% if section.settings.product_image != blank %}
                    <img 
                        src="{{ section.settings.product_image | image_url: width: 600 }}" 
                        alt="{{ section.settings.product_image.alt | default: 'Product Image' }}" 
                        loading="lazy"
                    >
                {% else %}
                     <img 
                        src="https://placehold.co/400x500/000000/ffffff/png?text=Product+Image" 
                        alt="Placeholder Product Image" 
                    >
                {% endif %}
            </div>
        </div>
    </div>

    <div class="feature-content-col">
        
        <p class="callout-text">
            {{ section.settings.callout_text | escape }}
        </p>
        <h2 class="headline">
            {{ section.settings.headline_text | escape }}
        </h2>

        <div class="features-grid">
            
            {% for block in section.blocks %}
                {% case block.type %}
                    {% when 'feature' %}
                    <div class="feature-item" {{ block.shopify_attributes }}>
                        <div class="feature-icon-container hex-clip-{{ section.id }}">
                            {% if block.settings.icon_image != blank %}
                                <img 
                                    src="{{ block.settings.icon_image | image_url: width: 80 }}" 
                                    alt="{{ block.settings.icon_image.alt | default: 'Feature Icon' }}" 
                                    loading="lazy"
                                >
                            {% else %}
                                {% comment %} Use a colored placeholder if no image is set {% endcomment %}
                                <div class="feature-placeholder">
                                    {{ forloop.index }}
                                </div>
                            {% endif %}
                        </div>
                        <h4 class="feature-title">
                            {{ block.settings.title | escape }}
                        </h4>
                        <p class="feature-description">
                            {{ block.settings.description | escape }}
                        </p>
                    </div>
                {% endcase %}
            {% endfor %}

        </div>
    </div>
    
</div>


</div>

{% schema %}
{
"name": "Custom Feature Grid",
"tag": "section",
"class": "section-product-features",
"max_blocks": 4,
"settings": [
    {
        "type": "header",
        "content": "Section Content"
    },
    {
        "type": "text",
        "id": "callout_text",
        "label": "Callout Text (Above Headline)",
        "default": "INCREASED ENERGY WITH SUXNIX"
    },
    {
        "type": "text",
        "id": "headline_text",
        "label": "Main Headline",
        "default": "SUXNIX INGREDIENTS"
    },
    {
        "type": "image_picker",
        "id": "product_image",
        "label": "Product Display Image",
        "info": "Best aspect ratio is tall (e.g., 4:5)."
    },
    
    {
        "type": "header",
        "content": "üé® Color and Style Settings"
    },
    {
        "type": "color",
        "id": "bg_color",
        "label": "Background Color",
        "default": "#ffffff"
    },
    {
        "type": "color",
        "id": "primary_color",
        "label": "Primary Accent Color (Callout Text, Hover)",
        "default": "#10b981"
    },
    {
        "type": "color",
        "id": "secondary_color",
        "label": "Secondary Accent Color (Icon Placeholder)",
        "default": "#4f46e5"
    },
    {
        "type": "color",
        "id": "headline_color",
        "label": "Headline/Title Color",
        "default": "#1f2937"
    },
    {
        "type": "color",
        "id": "text_color",
        "label": "Description Text Color",
        "default": "#4b5563"
    },
    
    {
        "type": "header",
        "content": "üìè Typography Settings (Font Sizes)"
    },
    {
        "type": "range",
        "id": "callout_text_size",
        "min": 0.5,
        "max": 1,
        "step": 0.1,    
        "unit": "rem",
        "label": "Callout Text Size",
        "default": 0.8  
    },
    {
        "type": "range",
        "id": "headline_size_mobile",
        "min": 1.5,
        "max": 2,
        "step": 0.1,
        "unit": "rem",
        "label": "Headline Size (Mobile)",
        "default": 1.9 
    },
    {
        "type": "range",
        "id": "headline_size_desktop",
        "min": 2.0,
        "max": 3.0,
        "step": 0.1,
        "unit": "rem",
        "label": "Headline Size (Desktop)",
        "default": 2.3 
    },
    {
        "type": "range",
        "id": "feature_title_size_mobile",
        "min": 0.8,
        "max": 1,
        "step": 0.1,    
        "unit": "rem",
        "label": "Feature Title Size (Mobile)",
        "default": 1.0
    },
    {
        "type": "range",
        "id": "feature_title_size_desktop",
        "min": 1.0,
        "max": 1,
        "step": 0.1,    
        "unit": "rem",
        "label": "Feature Title Size (Desktop)",
        "default": 1.1
    },
    {
        "type": "range",
        "id": "feature_description_size",
        "min": 0.8,   /* FIX APPLIED HERE: Changed from 0.75 to 0.8 */
        "max": 1,
        "step": 0.1,    
        "unit": "rem",
        "label": "Feature Description Size",
        "default": 0.9 
    },

    {
        "type": "header",
        "content": "üñºÔ∏è Product Image Settings (Ratio)"
    },
    {
        "type": "range",
        "id": "product_image_ratio_w",
        "min": 1,
        "max": 1,
        "step": 1,
        "label": "Image Aspect Ratio - Width (W)",
        "default": 4,
        "info": "Sets the W in W:H ratio. e.g., 4"
    },
    {
        "type": "range",
        "id": "product_image_ratio_h",
        "min": 1,
        "max": 10,
        "step": 1,
        "label": "Image Aspect Ratio - Height (H)",
        "default": 5,
        "info": "Sets the H in W:H ratio. The default 4:5 creates a tall image."
    },
    {
        "type": "header",
        "content": "Spacing"
    },
    {
        "type": "range",
        "id": "section_spacing_y",
        "min": 0,
        "max": 1,
        "step": 0.5,
        "unit": "px",
        "label": "Top and Bottom Section Spacing",
        "default": 0.5
    }
],
"blocks": [
{
"type": "feature",
"name": "Feature Item",
"settings": [
{
"type": "image_picker",
"id": "icon_image",
"label": "Feature Icon (Hexagon)"
},
{
"type": "text",
"id": "title",
"label": "Feature Title",
"default": "HELPS YOU STICK TO YOUR DIET"
},
{
"type": "textarea",
"id": "description",
"label": "Feature Description",
"default": "A thing added to something else in order to complete or enhance it."
}
]
}
],
"presets": [
{
"name": "Product Features (Image/Grid)",
"blocks": [
{ "type": "feature" },
{ "type": "feature" },
{ "type": "feature" },
{ "type": "feature" }
]
}
]
}
{% endschema %}